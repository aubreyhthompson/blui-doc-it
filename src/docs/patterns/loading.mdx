import { DemoCard, ImageGrid, MaterialDesignDescription } from '../../app/components';
import Image1 from '../../app/assets/design-patterns/loading-states/loading-state-load.png';
import Image2 from '../../app/assets/design-patterns/loading-states/loading-state.png';
import Image3 from '../../app/assets/design-patterns/empty-states/empty-states.png';
import Image4 from '../../app/assets/design-patterns/empty-states/empty-states-with-background-image.png';

<!-- KEYWORDS: design pattern loading asynchronous api refresh -->

# Loading & Waiting

Often times, your application will need to load data from a remote location with some amount of latency. Other times, there may be areas of your application where there is no available data to display. This is where loading and empty state indicators come into play.

## Loading Data

<ImageGrid
    images={[Image1, Image2]}
    caption={'When data is loading, use placeholder shapes for where the data will appear.'}
/>
<DemoCard repository={'loading-states'} angular={'https://stackblitz.com/github/pxblue/angular-design-patterns?file=src%2Fapp%2Fpages%2Floading-states%2Floading-states.component.ts'} react={'https://codesandbox.io/s/github/pxblue/react-design-patterns/tree/master?file=/src/pages/loading-states/index.tsx&initialpath=loading-states'} ionic reactNative />

When loading data for the first time, you do not want to show an empty screen while you are fetching data. Instead, you should show placeholders that mimic (using simple shapes) the data that will eventually be loaded. This will give the impression that your application is faster and gives users an indication of what kind of data is being loaded.

The placeholder should match as closely as possible the real structure of the data. For example, if you are loading a list where each item has an icon, two lines of text, and an action button, then your placeholder should have a circle, two rectangles for the text, and another rectangle for the button. You should show as many placeholder elements as necessary to fill the area in the application that is loading data.

There are a number of libraries available to help you create this placeholder content, such as:

-   [@netbasal/ngx-content-loader](https://www.npmjs.com/package/@netbasal/ngx-content-loader) (Angular, Ionic)
-   [ion-skeleton-text](https://ionicframework.com/docs/api/skeleton-text) (Ionic)
-   [placeholder-loading](https://www.npmjs.com/package/placeholder-loading) (React, Angular, Ionic)
-   [react-content-loader](https://www.npmjs.com/package/react-content-loader) (React)
-   [rn-placeholder](https://www.npmjs.com/package/rn-placeholder) (React Native)

### Refreshing Data

When refreshing data, there are several approaches you can take. If you are showing real-time data (either via polling or a push mechanism from the server), there is no need to show large loading indicators. You may wish to show a small indicator or at least mention when the data was last refreshed so users can identify if the data is stale.

If your users can manually refresh, you may wish to show the placeholder elements (as with initial load), or simply refresh the data behind the scenes (as with real-time). Ultimately, this should depend on how long it takes to refresh the data.
